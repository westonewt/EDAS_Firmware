import can
import time
import gpiozero
import os

#set up CAN0 with a bitrate of 1000kbps
os.system("sudo ip link set can0 up type can bitrate 1000000 fd off")

try:
    bus=can.interface.Bus(channel='can0',bustype='socketcan',fd=False)
    print("Bus interface connected")

except OSError:
     print("could not find Bus interface")
     exit()

#create message (change ID to be RF module)
msg=can.Message(arbitration_id=0x123,data=[0x11,0x22,0x33,0x44,0x55,0x66,0x77,0x88,0x99,0xAA],is_extended_id=False,is_fd=False)
print("message valid")

try:
    bus.send(msg)
    print(f"message sent {msg}")
    time.sleep(0.1)
except can.CanError:
    print("Error: Message not sent")

os.system("sudo ip link set can0 down")
